{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\src\\\\components\\\\Header.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Navbar, Container, Nav, Form, FormControl } from 'react-bootstrap';\nimport logo from '../assets/img/bharat-token.png';\nimport { FaSearch, FaUserCircle } from 'react-icons/fa';\nimport { Link, useNavigate } from 'react-router-dom'; // import { CONTACT_ADDRESS, Abi } from '../contract/bhartnft';\n\nimport Web3 from \"web3\";\nimport axios from 'axios'; // var BASE_URL = \"http://148.72.244.170:5001\"\n\nvar BASE_URL = process.env.REACT_APP_BASE_URL;\nconsole.log(\"API_URL\", BASE_URL);\nvar web3_Stake = new Web3(window.ethereum);\n\nfunction Header() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      checkAddress = _useState2[0],\n      setcheckAddress = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      eth_balance = _useState4[0],\n      setEthBalance = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      logoutbtn = _useState6[0],\n      setLogoutbtn = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      search = _useState8[0],\n      setSearch = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      data = _useState10[0],\n      setNftData = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userData = _useState12[0],\n      setUserData = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      show = _useState14[0],\n      setShow = _useState14[1];\n\n  var navigate = useNavigate();\n  var userDetail = JSON.parse(sessionStorage.getItem('user'));\n\n  function openMetamask() {\n    return _openMetamask.apply(this, arguments);\n  }\n\n  function _openMetamask() {\n    _openMetamask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              window.ethereum.enable().then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address) {\n                  var loginUserAdd, ethBalance, formData, signature, connect_user, userDetail;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          loginUserAdd = address[0];\n                          sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\n                          console.log(\"loginUserAddress1loginUserAddress1\", loginUserAdd);\n                          _context2.next = 5;\n                          return web3_Stake.eth.getBalance(loginUserAdd);\n\n                        case 5:\n                          _context2.next = 7;\n                          return _context2.sent;\n\n                        case 7:\n                          ethBalance = _context2.sent;\n                          ethBalance = Web3.utils.fromWei(ethBalance, 'ether').slice(0, 6);\n                          console.log(\"ethBalance\", ethBalance);\n\n                          if (ethBalance) {\n                            sessionStorage.setItem(\"ethBalance\", ethBalance);\n                          }\n\n                          formData = new FormData();\n                          formData.append(\"wallet_address\", loginUserAdd);\n                          signature = \"\"; // var connect_user = await axios.post(`http://148.72.244.170:5001/user/connect`, {id:loginUserAdd, signature:signature})\n\n                          _context2.next = 16;\n                          return axios.post(\"\".concat(BASE_URL, \"/login\"), formData);\n\n                        case 16:\n                          connect_user = _context2.sent;\n                          console.log(\"connect_user\", connect_user.data.result);\n                          sessionStorage.setItem(\"user\", JSON.stringify(connect_user.data.result));\n                          userDetail = JSON.parse(sessionStorage.getItem('user'));\n                          window.location.reload();\n\n                        case 21:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x3) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _openMetamask.apply(this, arguments);\n  }\n\n  console.log(\"userDetailuserDetail\", userDetail); //   const networkChanged = (chainId) => {\n  //     console.log(\"chainIdgghj\", chainId);\n  //     if (chainId == \"4\") {\n  //         window.ethereum.enable().then((address) => {\n  //             var loginUserAdd = address[0];\n  //             sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\n  //         });\n  //         window.location.reload();\n  //     }\n  // };\n\n  useEffect(function () {\n    var getethBalance = sessionStorage.getItem('ethBalance');\n    console.log(\"getethBalance\", getethBalance); // const userDetail = JSON.parse(sessionStorage.getItem('user'))\n    // setAuthUserDetail(userDetail)\n\n    if (getethBalance) {\n      setEthBalance(getethBalance);\n      setLogoutbtn(true);\n    }\n  }, []);\n  useEffect(function () {\n    // =============================== SHOW ADDRESS BY COOKIE ==============================================\n    var checkAddress = sessionStorage.getItem('loginUserAdd');\n    setcheckAddress(checkAddress);\n    console.log(\"sessionStorage\", checkAddress);\n  }, []);\n\n  function logoutMetamask() {\n    return _logoutMetamask.apply(this, arguments);\n  }\n\n  function _logoutMetamask() {\n    _logoutMetamask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(\"click me\");\n              sessionStorage.clear();\n              navigate(\"/\");\n              window.location.reload();\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _logoutMetamask.apply(this, arguments);\n  }\n\n  var _onKeyUp = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var query, formData, searchData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = e;\n\n              if (!(query.length === 0)) {\n                _context.next = 6;\n                break;\n              }\n\n              setNftData([]);\n              document.getElementById(\"search_box\").style.display = \"none\";\n              _context.next = 12;\n              break;\n\n            case 6:\n              formData = new FormData();\n              formData.append(\"word\", query);\n              _context.next = 10;\n              return axios.post(\"\".concat(BASE_URL, \"/searchNFT\"), formData);\n\n            case 10:\n              searchData = _context.sent;\n\n              if (searchData.data.status == 200) {\n                setNftData(searchData.data.result);\n                document.getElementById(\"search_box\").style.display = \"block\";\n              } else {\n                setNftData();\n                document.getElementById(\"search_box\").style.display = \"block\";\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onKeyUp(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function handleSearch(_x2) {\n    return _handleSearch.apply(this, arguments);\n  }\n\n  function _handleSearch() {\n    _handleSearch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              navigate(\"/prod_detail?id=\".concat(e.id));\n              window.location.reload();\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _handleSearch.apply(this, arguments);\n  }\n\n  console.log(\"userDatauserData\", userData.profileImage);\n  console.log(\"search data\", data);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    expand: \"lg\",\n    className: \"cus_navbar\",\n    variant: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"logo\",\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n    \"aria-controls\": \"responsive-navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    id: \"responsive-navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"header_right w-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaSearch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormControl, {\n    type: \"search\",\n    placeholder: \"Search items and account\",\n    className: \"search-input me-2\" // onChange={(e) => setSearch(e.target.value)} \n    ,\n    onKeyUp: function onKeyUp(e) {\n      return _onKeyUp(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search_data_box\",\n    id: \"search_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, data ? data.map(function (e) {\n    // console.log(\"eeee\", e)\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      onClick: function onClick() {\n        return handleSearch(e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 29\n      }\n    }, e.name));\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 23\n    }\n  }, \"No NFT\")))), /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, logoutbtn ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header_login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    class: \"btn btn-outline-secondary me-5\",\n    to: \"/create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 23\n    }\n  }, \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    to: \"/\",\n    onClick: logoutMetamask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 22\n    }\n  }, \"Logout\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 22\n    }\n  }, eth_balance, \"ETH\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    className: \"user-icon\",\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: userDetail.profileImage,\n    alt: \"\",\n    className: \"img-fluid profile_nft_img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  })))) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    onClick: openMetamask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  })))));\n}\n\nexport default Header;","map":{"version":3,"sources":["D:/Priyanka/Bharat_nft/bharat_14Jun/src/components/Header.jsx"],"names":["React","useState","useEffect","Navbar","Container","Nav","Form","FormControl","logo","FaSearch","FaUserCircle","Link","useNavigate","Web3","axios","BASE_URL","process","env","REACT_APP_BASE_URL","console","log","web3_Stake","window","ethereum","Header","checkAddress","setcheckAddress","eth_balance","setEthBalance","logoutbtn","setLogoutbtn","search","setSearch","data","setNftData","userData","setUserData","show","setShow","navigate","userDetail","JSON","parse","sessionStorage","getItem","openMetamask","enable","then","address","loginUserAdd","setItem","eth","getBalance","ethBalance","utils","fromWei","slice","formData","FormData","append","signature","post","connect_user","result","stringify","location","reload","getethBalance","logoutMetamask","clear","onKeyUp","e","query","length","document","getElementById","style","display","searchData","status","handleSearch","id","profileImage","target","value","map","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Navbar, Container, Nav, Form, FormControl } from 'react-bootstrap'\r\nimport logo from '../assets/img/bharat-token.png'\r\nimport { FaSearch,FaUserCircle } from 'react-icons/fa'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\n// import { CONTACT_ADDRESS, Abi } from '../contract/bhartnft';\r\nimport Web3 from \"web3\";\r\nimport axios from 'axios';\r\n\r\n\r\n// var BASE_URL = \"http://148.72.244.170:5001\"\r\nvar BASE_URL = process.env.REACT_APP_BASE_URL\r\nconsole.log(\"API_URL\", BASE_URL)\r\n\r\nconst web3_Stake = new Web3(window.ethereum);\r\n\r\nfunction Header() {\r\n  const [checkAddress, setcheckAddress] = useState(\"\");\r\n  const [eth_balance, setEthBalance] = useState(\"\")\r\n  const [logoutbtn, setLogoutbtn] = useState(false);\r\n  const [search, setSearch] = useState(\"\")\r\n  const [data, setNftData] = useState([])\r\n  const [userData, setUserData] = useState([])\r\n\r\n  const [show, setShow] = useState(false);\r\n\r\n  let navigate = useNavigate()\r\n  const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n\r\n  async function openMetamask() {\r\n    window.ethereum.enable().then(async (address) => {\r\n      var loginUserAdd = address[0];\r\n      sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\r\n      console.log(\"loginUserAddress1loginUserAddress1\", loginUserAdd);\r\n      var ethBalance = await (await web3_Stake.eth.getBalance(loginUserAdd))\r\n      ethBalance = Web3.utils.fromWei(ethBalance, 'ether').slice(0,6);\r\n      console.log(\"ethBalance\", ethBalance)\r\n      if (ethBalance) {\r\n        sessionStorage.setItem(\"ethBalance\", ethBalance);\r\n      }\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"wallet_address\", loginUserAdd);\r\n      \r\n      var signature = \"\"\r\n      // var connect_user = await axios.post(`http://148.72.244.170:5001/user/connect`, {id:loginUserAdd, signature:signature})\r\n      var connect_user = await axios.post(`${BASE_URL}/login`, formData)\r\n\r\n     console.log(\"connect_user\",connect_user.data.result)\r\n     sessionStorage.setItem(\"user\", JSON.stringify(connect_user.data.result));\r\n    \r\n    const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n    window.location.reload()\r\n    });\r\n  }\r\nconsole.log(\"userDetailuserDetail\",userDetail)\r\n//   const networkChanged = (chainId) => {\r\n//     console.log(\"chainIdgghj\", chainId);\r\n\r\n//     if (chainId == \"4\") {\r\n//         window.ethereum.enable().then((address) => {\r\n//             var loginUserAdd = address[0];\r\n//             sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\r\n//         });\r\n\r\n//         window.location.reload();\r\n//     }\r\n// };\r\n\r\n\r\n  useEffect(() => {\r\n    const getethBalance = sessionStorage.getItem('ethBalance')\r\n    console.log(\"getethBalance\",getethBalance)\r\n    // const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n\r\n    // setAuthUserDetail(userDetail)\r\n    if (getethBalance) {\r\n      setEthBalance(getethBalance)\r\n      setLogoutbtn(true)\r\n    }\r\n  },[])\r\n\r\n\r\n  useEffect(() => {\r\n    // =============================== SHOW ADDRESS BY COOKIE ==============================================\r\n    let checkAddress = sessionStorage.getItem('loginUserAdd')\r\n    setcheckAddress(checkAddress)\r\n    console.log(\"sessionStorage\", checkAddress)\r\n    \r\n  }, []);\r\n\r\n  async function logoutMetamask() {\r\n    console.log(\"click me\")\r\n    sessionStorage.clear()\r\n    navigate(\"/\")\r\n    window.location.reload()\r\n  }\r\n\r\n  const onKeyUp = async (e) => {\r\n    var query = e\r\n    if(query.length === 0){\r\n      setNftData([])\r\n      document.getElementById(\"search_box\").style.display=\"none\"\r\n    }else{\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"word\", query);\r\n\r\n      var searchData = await axios.post(`${BASE_URL}/searchNFT`, formData)\r\n\r\n      if(searchData.data.status == 200){\r\n        setNftData(searchData.data.result)\r\n        document.getElementById(\"search_box\").style.display=\"block\"\r\n      }\r\n      else{\r\n        setNftData()\r\n        document.getElementById(\"search_box\").style.display=\"block\"\r\n      }\r\n\r\n    }\r\n   \r\n  }\r\n \r\n  async function handleSearch (e){\r\n    navigate(`/prod_detail?id=${e.id}`)\r\n    window.location.reload()\r\n  }\r\n\r\n  console.log(\"userDatauserData\", userData.profileImage)\r\n  console.log(\"search data\", data)\r\n\r\n  return (\r\n    <div className='header'>\r\n    <Navbar expand=\"lg\" className='cus_navbar' variant=\"dark\">\r\n      <Container>\r\n        <Link to='/'><img src={logo} alt=\"logo\" className=\"logo\" /></Link>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n          <div class=\"header_right w-40\">\r\n            <div className=\"form-sec\">\r\n              <FaSearch />\r\n              <FormControl\r\n                type=\"search\"\r\n                placeholder=\"Search items and account\"\r\n                className=\"search-input me-2\"\r\n                // onChange={(e) => setSearch(e.target.value)} \r\n                onKeyUp={(e)=>onKeyUp(e.target.value)}\r\n              />\r\n              \r\n            </div> \r\n            <div className='search_data_box' id='search_box'>\r\n                {data?\r\n                    data.map((e) => {\r\n                        // console.log(\"eeee\", e)\r\n                        return (\r\n                          <div>\r\n                            <div className='' onClick={() => handleSearch(e)}>{e.name}</div>\r\n                          </div>\r\n                        )\r\n                    })\r\n                    :\r\n                    <div>\r\n                      <div className=''>No NFT</div>\r\n                    </div>\r\n                    } \r\n            </div> \r\n          </div>\r\n          <Nav>\r\n\r\n            {logoutbtn ?\r\n              \r\n              <div className='header_login'>\r\n                <div> <Link type=\"button\" class=\"btn btn-outline-secondary me-5\" to='/create'>Create</Link></div>\r\n                <div><Link type=\"button\" class=\"btn btn-outline-secondary\" to='/' onClick={logoutMetamask}>Logout</Link></div>\r\n                <div><button type=\"button\" class=\"btn btn-outline-secondary\" >{eth_balance}ETH</button></div>\r\n                {/* <div><Link type=\"button\" className='user-icon' to='/profile'> <FaUserCircle /></Link></div> */}\r\n                <div>\r\n                  <Link type=\"button\" className='user-icon' to='/profile'>\r\n                  <img src={userDetail.profileImage} alt=\"\"className=\"img-fluid profile_nft_img\" />\r\n                  </Link>\r\n                </div>\r\n\r\n                {/* <img src={userProfile} alt=\"\"className=\"img-fluid profile_nft_img\" /> */}\r\n             \r\n                \r\n                \r\n                \r\n              </div>\r\n              :\r\n              <button type=\"button\" class=\"btn btn-outline-secondary\" onClick={openMetamask}>Login</button>\r\n            }\r\n          </Nav>\r\n          \r\n          <div className='login-btn'>\r\n\r\n\r\n\r\n\r\n            {/*<Link type=\"button\" class=\"btn btn-outline-secondary\" to=''>Ethereum</Link>*/}\r\n          </div>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header"]},"metadata":{},"sourceType":"module"}