{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Priyanka\\\\Bharat_nft\\\\bharat_14Jun\\\\src\\\\components\\\\Header.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Navbar, Container, Nav, Form, FormControl } from 'react-bootstrap';\nimport logo from '../assets/img/bharat-token.png';\nimport { FaSearch, FaUserCircle } from 'react-icons/fa';\nimport { Link, useNavigate } from 'react-router-dom'; // import { CONTACT_ADDRESS, Abi } from '../contract/bhartnft';\n\nimport Web3 from \"web3\";\nimport axios from 'axios'; // var BASE_URL = \"http://148.72.244.170:5001\"\n\nvar BASE_URL = process.env.REACT_APP_BASE_URL;\nconsole.log(\"API_URL\", BASE_URL);\nvar web3_Stake = new Web3(window.ethereum);\n\nfunction Header() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      checkAddress = _useState2[0],\n      setcheckAddress = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      eth_balance = _useState4[0],\n      setEthBalance = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      logoutbtn = _useState6[0],\n      setLogoutbtn = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      search = _useState8[0],\n      setSearch = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      data = _useState10[0],\n      setNftData = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userData = _useState12[0],\n      setUserData = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      show = _useState14[0],\n      setShow = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      chain = _useState16[0],\n      setChainId = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      chainNetwork = _useState18[0],\n      setChainNetwork = _useState18[1];\n\n  var navigate = useNavigate();\n  var userDetail = JSON.parse(sessionStorage.getItem('user'));\n\n  function openMetamask() {\n    return _openMetamask.apply(this, arguments);\n  }\n\n  function _openMetamask() {\n    _openMetamask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              window.ethereum.enable().then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(address) {\n                  var loginUserAdd, ethBalance, chainId, chain, formData, signature, connect_user, userDetail;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          loginUserAdd = address[0];\n                          sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\n                          console.log(\"loginUserAddress1loginUserAddress1\", loginUserAdd);\n                          _context2.next = 5;\n                          return web3_Stake.eth.getBalance(loginUserAdd);\n\n                        case 5:\n                          _context2.next = 7;\n                          return _context2.sent;\n\n                        case 7:\n                          ethBalance = _context2.sent;\n                          ethBalance = Web3.utils.fromWei(ethBalance, 'ether').slice(0, 6);\n                          console.log(\"ethBalance\", ethBalance);\n\n                          if (ethBalance) {\n                            sessionStorage.setItem(\"ethBalance\", ethBalance);\n                          }\n\n                          chainId = window.ethereum.chainId;\n\n                          if (chainId == 0x4) {\n                            chain = \"ETH\";\n                            setChainId(chain);\n                          } else if (chainId == 0x61) {\n                            chain = \"BNB\";\n                            setChainId(chain);\n                          }\n\n                          if (chainId) {\n                            sessionStorage.setItem(\"chainNetwork\", chain);\n                          }\n\n                          formData = new FormData();\n                          formData.append(\"wallet_address\", loginUserAdd);\n                          signature = \"\"; // var connect_user = await axios.post(`http://148.72.244.170:5001/user/connect`, {id:loginUserAdd, signature:signature})\n\n                          _context2.next = 19;\n                          return axios.post(\"\".concat(BASE_URL, \"/login\"), formData);\n\n                        case 19:\n                          connect_user = _context2.sent;\n                          console.log(\"connect_user\", connect_user.data.result);\n                          sessionStorage.setItem(\"user\", JSON.stringify(connect_user.data.result));\n                          userDetail = JSON.parse(sessionStorage.getItem('user'));\n                          window.location.reload();\n\n                        case 24:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x3) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _openMetamask.apply(this, arguments);\n  }\n\n  console.log(\"userDetailuserDetail\", userDetail); //   const networkChanged = (chainId) => {\n  //     console.log(\"chainIdgghj\", chainId);\n  //     if (chainId == \"4\") {\n  //         window.ethereum.enable().then((address) => {\n  //             var loginUserAdd = address[0];\n  //             sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\n  //         });\n  //         window.location.reload();\n  //     }\n  // };\n\n  useEffect(function () {\n    var getethBalance = sessionStorage.getItem('ethBalance');\n    console.log(\"getethBalance\", getethBalance); // const userDetail = JSON.parse(sessionStorage.getItem('user'))\n    // setAuthUserDetail(userDetail)\n\n    if (getethBalance) {\n      setEthBalance(getethBalance);\n      setLogoutbtn(true);\n    }\n  }, []);\n  useEffect(function () {\n    // =============================== SHOW ADDRESS BY COOKIE ==============================================\n    var checkAddress = sessionStorage.getItem('loginUserAdd');\n    setcheckAddress(checkAddress);\n    console.log(\"sessionStorage\", checkAddress);\n    var chainNetwork = sessionStorage.getItem('chainNetwork');\n    setChainNetwork(chainNetwork);\n  }, []);\n\n  function logoutMetamask() {\n    return _logoutMetamask.apply(this, arguments);\n  }\n\n  function _logoutMetamask() {\n    _logoutMetamask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(\"click me\");\n              sessionStorage.clear();\n              navigate(\"/\");\n              window.location.reload();\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _logoutMetamask.apply(this, arguments);\n  }\n\n  var _onKeyUp = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var query, formData, searchData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = e;\n\n              if (!(query.length === 0)) {\n                _context.next = 6;\n                break;\n              }\n\n              setNftData([]);\n              document.getElementById(\"search_box\").style.display = \"none\";\n              _context.next = 12;\n              break;\n\n            case 6:\n              formData = new FormData();\n              formData.append(\"word\", query);\n              _context.next = 10;\n              return axios.post(\"\".concat(BASE_URL, \"/searchNFT\"), formData);\n\n            case 10:\n              searchData = _context.sent;\n\n              if (searchData.data.status == 200) {\n                setNftData(searchData.data.result);\n                document.getElementById(\"search_box\").style.display = \"block\";\n              } else {\n                setNftData();\n                document.getElementById(\"search_box\").style.display = \"block\";\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onKeyUp(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function handleSearch(_x2) {\n    return _handleSearch.apply(this, arguments);\n  }\n\n  function _handleSearch() {\n    _handleSearch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              navigate(\"/prod_detail?id=\".concat(e.id));\n              window.location.reload();\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _handleSearch.apply(this, arguments);\n  }\n\n  console.log(\"userDatauserData\", userData.profileImage);\n  console.log(\"search data\", data);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    expand: \"lg\",\n    className: \"cus_navbar\",\n    variant: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"logo\",\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(Navbar.Toggle, {\n    \"aria-controls\": \"responsive-navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Navbar.Collapse, {\n    id: \"responsive-navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"header_right w-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-sec\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FaSearch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormControl, {\n    type: \"search\",\n    placeholder: \"Search items and account\",\n    className: \"search-input me-2\" // onChange={(e) => setSearch(e.target.value)} \n    ,\n    onKeyUp: function onKeyUp(e) {\n      return _onKeyUp(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search_data_box\",\n    id: \"search_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, data ? data.map(function (e) {\n    // console.log(\"eeee\", e)\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      onClick: function onClick() {\n        return handleSearch(e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, e.name));\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 23\n    }\n  }, \"No Result Found\")))), /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, logoutbtn ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header_login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, \" \", /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    class: \"btn btn-outline-secondary me-5\",\n    to: \"/create\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 23\n    }\n  }, \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    to: \"/\",\n    onClick: logoutMetamask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 22\n    }\n  }, \"Logout\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 22\n    }\n  }, eth_balance, \" \", chainNetwork)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    type: \"button\",\n    className: \"user-icon\",\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, userDetail ? /*#__PURE__*/React.createElement(\"img\", {\n    src: userDetail.profileImage,\n    alt: \"\",\n    className: \"img-fluid profile_nft_img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 34\n    }\n  }) : null))) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-outline-secondary\",\n    onClick: openMetamask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  })))));\n}\n\nexport default Header;","map":{"version":3,"sources":["D:/Priyanka/Bharat_nft/bharat_14Jun/src/components/Header.jsx"],"names":["React","useState","useEffect","Navbar","Container","Nav","Form","FormControl","logo","FaSearch","FaUserCircle","Link","useNavigate","Web3","axios","BASE_URL","process","env","REACT_APP_BASE_URL","console","log","web3_Stake","window","ethereum","Header","checkAddress","setcheckAddress","eth_balance","setEthBalance","logoutbtn","setLogoutbtn","search","setSearch","data","setNftData","userData","setUserData","show","setShow","chain","setChainId","chainNetwork","setChainNetwork","navigate","userDetail","JSON","parse","sessionStorage","getItem","openMetamask","enable","then","address","loginUserAdd","setItem","eth","getBalance","ethBalance","utils","fromWei","slice","chainId","formData","FormData","append","signature","post","connect_user","result","stringify","location","reload","getethBalance","logoutMetamask","clear","onKeyUp","e","query","length","document","getElementById","style","display","searchData","status","handleSearch","id","profileImage","target","value","map","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Navbar, Container, Nav, Form, FormControl } from 'react-bootstrap'\r\nimport logo from '../assets/img/bharat-token.png'\r\nimport { FaSearch,FaUserCircle } from 'react-icons/fa'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\n// import { CONTACT_ADDRESS, Abi } from '../contract/bhartnft';\r\nimport Web3 from \"web3\";\r\nimport axios from 'axios';\r\n\r\n\r\n// var BASE_URL = \"http://148.72.244.170:5001\"\r\nvar BASE_URL = process.env.REACT_APP_BASE_URL\r\nconsole.log(\"API_URL\", BASE_URL)\r\n\r\nconst web3_Stake = new Web3(window.ethereum);\r\n\r\nfunction Header() {\r\n  const [checkAddress, setcheckAddress] = useState(\"\");\r\n  const [eth_balance, setEthBalance] = useState(\"\")\r\n  const [logoutbtn, setLogoutbtn] = useState(false);\r\n  const [search, setSearch] = useState(\"\")\r\n  const [data, setNftData] = useState([])\r\n  const [userData, setUserData] = useState([])\r\n\r\n  const [show, setShow] = useState(false);\r\n  const [chain, setChainId] = useState(\"\");\r\n  const [chainNetwork, setChainNetwork] = useState(\"\");\r\n\r\n  let navigate = useNavigate()\r\n  const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n\r\n  async function openMetamask() {\r\n    window.ethereum.enable().then(async (address) => {\r\n      var loginUserAdd = address[0];\r\n      sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\r\n      console.log(\"loginUserAddress1loginUserAddress1\", loginUserAdd);\r\n      var ethBalance = await (await web3_Stake.eth.getBalance(loginUserAdd))\r\n      ethBalance = Web3.utils.fromWei(ethBalance, 'ether').slice(0,6);\r\n      console.log(\"ethBalance\", ethBalance)\r\n      if (ethBalance) {\r\n        sessionStorage.setItem(\"ethBalance\", ethBalance);\r\n      }\r\n      var chainId =  window.ethereum.chainId;\r\n\r\n      \r\n     if(chainId == 0x4){\r\n       var chain = \"ETH\";\r\n       setChainId(chain)\r\n     }else if (chainId == 0x61){\r\n      var chain = \"BNB\";\r\n      setChainId(chain)\r\n     }\r\n     if (chainId) {\r\n      sessionStorage.setItem(\"chainNetwork\", chain);\r\n     }\r\n     \r\n\r\n     \r\n      const formData = new FormData();\r\n      formData.append(\"wallet_address\", loginUserAdd);\r\n      \r\n      var signature = \"\"\r\n      // var connect_user = await axios.post(`http://148.72.244.170:5001/user/connect`, {id:loginUserAdd, signature:signature})\r\n      var connect_user = await axios.post(`${BASE_URL}/login`, formData)\r\n\r\n     console.log(\"connect_user\",connect_user.data.result)\r\n     sessionStorage.setItem(\"user\", JSON.stringify(connect_user.data.result));\r\n    \r\n    const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n    window.location.reload()\r\n    });\r\n  }\r\nconsole.log(\"userDetailuserDetail\",userDetail)\r\n//   const networkChanged = (chainId) => {\r\n//     console.log(\"chainIdgghj\", chainId);\r\n\r\n//     if (chainId == \"4\") {\r\n//         window.ethereum.enable().then((address) => {\r\n//             var loginUserAdd = address[0];\r\n//             sessionStorage.setItem(\"loginUserAdd\", loginUserAdd);\r\n//         });\r\n\r\n//         window.location.reload();\r\n//     }\r\n// };\r\n\r\n\r\n  useEffect(() => {\r\n    const getethBalance = sessionStorage.getItem('ethBalance')\r\n    console.log(\"getethBalance\",getethBalance)\r\n    // const userDetail = JSON.parse(sessionStorage.getItem('user'))\r\n\r\n    // setAuthUserDetail(userDetail)\r\n    if (getethBalance) {\r\n      setEthBalance(getethBalance)\r\n      setLogoutbtn(true)\r\n    }\r\n  },[])\r\n\r\n\r\n  useEffect(() => {\r\n    // =============================== SHOW ADDRESS BY COOKIE ==============================================\r\n    let checkAddress = sessionStorage.getItem('loginUserAdd')\r\n    setcheckAddress(checkAddress)\r\n    console.log(\"sessionStorage\", checkAddress)\r\n    var chainNetwork = sessionStorage.getItem('chainNetwork')\r\n  setChainNetwork(chainNetwork)\r\n  \r\n  }, []);\r\n\r\n  async function logoutMetamask() {\r\n    console.log(\"click me\")\r\n    sessionStorage.clear()\r\n    navigate(\"/\")\r\n    window.location.reload()\r\n  }\r\n\r\n  const onKeyUp = async (e) => {\r\n    var query = e\r\n    if(query.length === 0){\r\n      setNftData([])\r\n      document.getElementById(\"search_box\").style.display=\"none\"\r\n    }else{\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"word\", query);\r\n\r\n      var searchData = await axios.post(`${BASE_URL}/searchNFT`, formData)\r\n\r\n      if(searchData.data.status == 200){\r\n        setNftData(searchData.data.result)\r\n        document.getElementById(\"search_box\").style.display=\"block\"\r\n      }\r\n      else{\r\n        setNftData()\r\n        document.getElementById(\"search_box\").style.display=\"block\"\r\n      }\r\n\r\n    }\r\n   \r\n  }\r\n \r\n  async function handleSearch (e){\r\n    navigate(`/prod_detail?id=${e.id}`)\r\n    window.location.reload()\r\n  }\r\n\r\n  console.log(\"userDatauserData\", userData.profileImage)\r\n  console.log(\"search data\", data)\r\n  \r\n  return (\r\n    <div className='header'>\r\n    <Navbar expand=\"lg\" className='cus_navbar' variant=\"dark\">\r\n      <Container>\r\n        <Link to='/'><img src={logo} alt=\"logo\" className=\"logo\" /></Link>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n          <div class=\"header_right w-40\">\r\n            <div className=\"form-sec\">\r\n              <FaSearch />\r\n              <FormControl\r\n                type=\"search\"\r\n                placeholder=\"Search items and account\"\r\n                className=\"search-input me-2\"\r\n                // onChange={(e) => setSearch(e.target.value)} \r\n                onKeyUp={(e)=>onKeyUp(e.target.value)}\r\n              />\r\n              \r\n            </div> \r\n            <div className='search_data_box' id='search_box'>\r\n                {data?\r\n                    data.map((e) => {\r\n                        // console.log(\"eeee\", e)\r\n                        return (\r\n                          <div>\r\n                            <div className='' onClick={() => handleSearch(e)}>{e.name}</div>\r\n                          </div>\r\n                        )\r\n                    })\r\n                    :\r\n                    <div>\r\n                      <div className=''>No Result Found</div>\r\n                    </div>\r\n                    } \r\n            </div> \r\n          </div>\r\n          <Nav>\r\n\r\n            {logoutbtn ?\r\n              \r\n              <div className='header_login'>\r\n                <div> <Link type=\"button\" class=\"btn btn-outline-secondary me-5\" to='/create'>Create</Link></div>\r\n                <div><Link type=\"button\" class=\"btn btn-outline-secondary\" to='/' onClick={logoutMetamask}>Logout</Link></div>\r\n                <div><button type=\"button\" class=\"btn btn-outline-secondary\" >{eth_balance} {chainNetwork}</button></div>\r\n                {/* <div><Link type=\"button\" className='user-icon' to='/profile'> <FaUserCircle /></Link></div> */}\r\n                <div>\r\n                  <Link type=\"button\" className='user-icon' to='/profile'>\r\n                    {userDetail? <img src={ userDetail.profileImage} alt=\"\"className=\"img-fluid profile_nft_img\" /> : null}\r\n                  \r\n                  </Link>\r\n                </div>\r\n\r\n                {/* <img src={userProfile} alt=\"\"className=\"img-fluid profile_nft_img\" /> */}\r\n             \r\n                \r\n                \r\n                \r\n              </div>\r\n              :\r\n              <button type=\"button\" class=\"btn btn-outline-secondary\" onClick={openMetamask}>Login</button>\r\n            }\r\n          </Nav>\r\n          \r\n          <div className='login-btn'>\r\n\r\n\r\n\r\n\r\n            {/*<Link type=\"button\" class=\"btn btn-outline-secondary\" to=''>Ethereum</Link>*/}\r\n          </div>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header"]},"metadata":{},"sourceType":"module"}